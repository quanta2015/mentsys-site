import React, { useState, useEffect,useCallback,useRef } from 'react';import dayjs from 'dayjs'import jwt from '@/util/token'import { useNavigate } from 'react-router-dom'import {isN} from '@/util/fn'import { toJS } from 'mobx'import { inject,observer,MobXProviderContext } from 'mobx-react'import * as urls from '@/constant/urls'import { API_SERVER } from '@/constant/apis'import { Form, Input, Button, message,Select,notification,Modal } from 'antd'import classnames from 'classnames';import StudBasic from '@/component/StudBasic'import s from './index.module.less';import person from '@/img/person.svg'const ListStud = () => {  const { store } = React.useContext(MobXProviderContext)  const navigate = useNavigate();  const [list,setList] = useState([])  const [stud,setStud] = useState(null)  const [sel,setSel] = useState(0)  useEffect(() => {    if (!window.token) {      navigate('/login')    }else{      let params = { uid: store.user.uid }      store.studListForMent(params).then(({data})=>{        if (data.length>0) {          setList(data)          setStud(data[0])        }      })    }  }, []);  const doSel =(i)=>{    setSel(i)    setStud(list[i])  }  const renderAttr = (e)=>(    e?.split('|').map((item,i)=>      <i>{item}</i>    )  )  const doMentClear = async(e)=>{    let params1 = { uid: list[sel].uid }    let params2 = { uid: store.user.uid }    await store.clearMent(params1)    let r = await store.studListForMent(params2)    if (r.length>0) {      setList(r)      setStud(r[0])      setSel(0)    }  }  return (      <div className={s.main}>      <span className="g-tl">指导学生列表</span>      <div className={s.wrap}>                {list.length>0 &&        <div className={s.list}>          {list.map((item,i)=>            <div key={i} className={classnames(s.item,{sel:sel===i}) } onClick={()=>doSel(i)}>                            {/*<img src={`${API_SERVER}/img/tech/${item.uid}.jpg`} />*/}              <img src={`${API_SERVER}/img/stud/${item.uid}.jpg`} />              <span>{item.name}</span>            </div>          )}        </div>}        {list.length>0 &&           <div className={s.detail}>            <StudBasic stud={stud} />            <div className={s.fun}>              <Button type="primary" danger block onClick={doMentClear}>取消指导</Button>            </div>          </div>        }        {list.length==0 &&         <div className={s.none}>暂无学生</div>        }      </div>    </div>  )}export default observer(ListStud)