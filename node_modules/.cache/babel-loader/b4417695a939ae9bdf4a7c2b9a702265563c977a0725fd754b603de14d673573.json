{"ast":null,"code":"import \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport axios from 'axios';\nimport jwt from './token';\nexport default (function (url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let allRes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  // let token = jwt.loadToken()\n  let token = window.token;\n  token ? axios.defaults.headers.common.authorization = `Bearer ${token}` : delete axios.defaults.headers.common.authorization;\n  return axios({\n    url,\n    ...options\n  }).then(r => {\n    if (allRes) {\n      return r.data;\n    }\n    if (r && r.status === 200) {\n      return r.data;\n    } else {\n      _message.error('网络错误');\n    }\n  }).catch(e => {\n    if (e.response) {\n      _message.error(e.response.data.msg);\n      return e.response.data;\n    }\n    _message.error('网络错误');\n  });\n});","map":{"version":3,"names":["axios","jwt","url","options","allRes","token","window","defaults","headers","common","authorization","then","r","data","status","error","catch","e","response","msg"],"sources":["E:/Project/tutorManagementSystem/mentsys-site/mentsys-site/src/util/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport { message } from 'antd'\r\nimport jwt from './token'\r\n\r\n\r\nexport default(url, options = {}, allRes = false) => {\r\n  // let token = jwt.loadToken()\r\n  let token = window.token\r\n\r\n  token\r\n    ? axios.defaults.headers.common.authorization = `Bearer ${token}`\r\n    : delete axios.defaults.headers.common.authorization\r\n\r\n  return axios({\r\n    url,\r\n    ...options\r\n  })\r\n  .then(r => {\r\n    if (allRes) {\r\n      return r.data\r\n    }\r\n\r\n    if (r && r.status === 200) {\r\n      return r.data\r\n    } else {\r\n      message.error('网络错误')\r\n    }\r\n  })\r\n  .catch(e => {\r\n    if (e.response) {\r\n      message.error(e.response.data.msg)\r\n      return e.response.data\r\n    }\r\n    message.error('网络错误')\r\n  })\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAOC,GAAG,MAAM,SAAS;AAGzB,gBAAc,UAACC,GAAG,EAAmC;EAAA,IAAjCC,OAAO,uEAAG,CAAC,CAAC;EAAA,IAAEC,MAAM,uEAAG,KAAK;EAC9C;EACA,IAAIC,KAAK,GAAGC,MAAM,CAACD,KAAK;EAExBA,KAAK,GACDL,KAAK,CAACO,QAAQ,CAACC,OAAO,CAACC,MAAM,CAACC,aAAa,GAAI,UAASL,KAAM,EAAC,GAC/D,OAAOL,KAAK,CAACO,QAAQ,CAACC,OAAO,CAACC,MAAM,CAACC,aAAa;EAEtD,OAAOV,KAAK,CAAC;IACXE,GAAG;IACH,GAAGC;EACL,CAAC,CAAC,CACDQ,IAAI,CAACC,CAAC,IAAI;IACT,IAAIR,MAAM,EAAE;MACV,OAAOQ,CAAC,CAACC,IAAI;IACf;IAEA,IAAID,CAAC,IAAIA,CAAC,CAACE,MAAM,KAAK,GAAG,EAAE;MACzB,OAAOF,CAAC,CAACC,IAAI;IACf,CAAC,MAAM;MACL,SAAQE,KAAK,CAAC,MAAM,CAAC;IACvB;EACF,CAAC,CAAC,CACDC,KAAK,CAACC,CAAC,IAAI;IACV,IAAIA,CAAC,CAACC,QAAQ,EAAE;MACd,SAAQH,KAAK,CAACE,CAAC,CAACC,QAAQ,CAACL,IAAI,CAACM,GAAG,CAAC;MAClC,OAAOF,CAAC,CAACC,QAAQ,CAACL,IAAI;IACxB;IACA,SAAQE,KAAK,CAAC,MAAM,CAAC;EACvB,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}