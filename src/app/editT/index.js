import React, { useState, useEffect,useCallback,useRef } from 'react';import dayjs from 'dayjs'import jwt from '@/util/token'import { useNavigate } from 'react-router-dom'import {isN} from '@/util/fn'import { inject,observer } from 'mobx-react'import { API_LOGIN,SKILL_OPT,AREA_OPT,FIELD_OPT } from '@/constant/urls'import { Form, Input, Button, message,Select } from 'antd'import s from './index.module.less';import person from '@/img/person.svg'const EditT = ({store}) => {  const navigate = useNavigate();  const [form] = Form.useForm();  const [projh,setProjh]= useState([])  const [projr,setProjr]= useState([])  const [docs ,setDocs]= useState([])  useEffect(() => {    if (!window.token) {      navigate('/login')    }else{      store.loadProj().then(r=>{        setProjh(r.projh)        setProjr(r.projr)        setDocs(r.docs)      })    }  }, []);  return (      <div className={s.std}>      <span className="g-tl">导师个人信息</span>      <Form form={form} className={s.frm}>        <div className={s.frml}>          <img src={person} />        </div>        <div className={s.frmr}>          <div className={s.sect}>基本信息</div>          <div className={s.row}>            <label>姓名</label>            <span>{store.user?.name}</span>            <label>工号</label>            <span>{store.user?.uid}</span>          </div>          <div className={s.row}>            <label>邮箱</label>            <span>{store.user?.email}</span>            <label>身份证</label>            <span>{store.user?.cert_code}</span>          </div>          <div className={s.row}>            <label>联系方式</label>            <span>{store.user?.phone}</span>          </div>          <br/>          {(projh.length>0) && <div className={s.sect}>应用项目</div>}          {projh.map((item,i)=>            <div className={s.proj}>              <i>{i+1}</i>              <label>{item.proj_name}</label>              <span>{item.date_pub}</span>            </div>          )}          <br/>          {(projr.length>0) && <div className={s.sect}>研究项目</div>}          {projr.map((item,i)=>            <div className={s.proj}>              <i>{i+1}</i>              <label>{item.proj_name}</label>              <span>{item.date_pub}</span>            </div>          )}          <br/>          {(docs.length>0) && <div className={s.sect}>发表论文</div>}          {docs.map((item,i)=>            <div className={s.proj}>              <i>{i+1}</i>              <label>{item.paper_title}</label>              <span>{item.date_pub}</span>            </div>          )}          <div className={s.sect}>导师信息</div>          <div className={s.attr}>            <label>主要研究领域</label>            <Select              mode="multiple"              allowClear              style={{ width: '100%' }}              placeholder="Please select"              options={FIELD_OPT}            />          </div>          <div className={s.attr}>            <label>指导学生方向</label>            <Select              allowClear              style={{ width: '100%' }}              defaultValue={AREA_OPT[0].value}              placeholder="Please select"              options={AREA_OPT}            />          </div>        </div>              </Form>    </div>  )}export default  inject('store')(observer(EditT))