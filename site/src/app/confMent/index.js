import React, { useState, useEffect,useCallback,useRef } from 'react';import dayjs from 'dayjs'import jwt from '@/util/token'import { useNavigate } from 'react-router-dom'import {isN} from '@/util/fn'import { toJS } from 'mobx'import { inject,observer,MobXProviderContext } from 'mobx-react'import * as urls from '@/constant/urls'import { API_SERVER } from '@/constant/apis'import { Form, Input, Button, Table, message,Select,notification,Modal,DatePicker,TimePicker } from 'antd'import classnames from 'classnames';import s from './index.module.less';const opts = [{  value: '教室1', label: '教室1'},{  value: '教室2', label: '教室2'},{  value: '教室3', label: '教室3'}]const formatStud = (list)=>{  return list.map(item=>{    item.guide_studs = JSON.parse(item.guide_studs).map(o=> o.name).join(' ')  })}const ConfMent = () => {  const { store } = React.useContext(MobXProviderContext)  const [form] = Form.useForm()  const navigate = useNavigate();  const [dataSource,setDataSource] = useState([])  const columns = [    {      title: '指导日期',      dataIndex: 'guide_date',      key: 'guide_date',    },{      title: '指导时间',      dataIndex: 'guide_time',      key: 'guide_time',    },{      title: '指导地点',      dataIndex: 'guide_addr',      key: 'guide_addr',    },{      title: '确认指导完成',      key: 'finished',      render: (record) => record.finished ===1?'完成':'未确认',    },{      title: '功能',      key: 'fun',      render: (record) => { return (record.finished ===0) && <Button type="primary" onClick={()=>doConfirm(record)}> 确认</Button>},    }  ];  useEffect(() => {    if (!window.token) {      navigate('/login')    }else{      let params = { uid: store.user.uid }      store.guideHistory(params).then(r=>{        setDataSource(r)      })    }  }, []);  const doConfirm =async(record)=>{    console.log(record)    let params = { uid: store.user.uid, id: record.id }    let r = await store.guideConfirm(params)    setDataSource(r)      }  return (      <div className={s.main}>      <span className="g-tl">确认指导记录</span>      <div className={s.ret}>        <Table dataSource={dataSource} columns={columns} />      </div>    </div>  )}export default observer(ConfMent)